# kowalski (1.0.0)
A tool designed to assist in the documentation of classes/functions in BlurEngine Lua.

## What does it do?
Scans the Lua environment of a provided BlurEngine binary, by executing a script with it.
The 'scan' is a json file which tries to capture the hierarchy of the environment.
(This includes: All functions and libraries found in `_G` and class metatables added in `config.json`).

Once the scan is concluded, a file is made in the root directory of this project `report.json`.

Afterwards, the python script must be run, `document.py`.
In its first phase, the script is responsible for generating empty (if they do not already exist) json files corresponding to each class/library (in `docs/`) and `global-functions.json` based on the contents of `report.json`. In this phase, existing files are also examined for differences and additional method/member entries may be added/removed depending on the contents of `report.json`.

In the second phase, the contents of `global-functions.json` along with everything in `docs/` is examined and tracked against a default 'undocumented' value. Based on this, output may later be generated by kowalski stating which classes/libraries/enums are yet to be documented, along with a useful percentage tracking the total count of 'undocumented' entries.

In the last phase, markdown page files for the mkdocs site are constructed from each json file and put in the directory `out/`

## What do I need to run it?
Just a few things:
- A copy of BlurEngine. (Simply copy the executable to this directory)
- A relatively modern version of Python (>= 3.10)
- A few pip packages (preferrably installed in a virtualenv, `venv/`)

### Additional notes about BlurEngine:
- Make sure to add the BlurEngine executable to the root directory of this project.
- If using older versions of BlurEngine which dont support `--headless` and the Null renderer, you may have to also add the `shaders/` directory to the BlurEngine directory. (Some ancient versions may also need you to copy a `content/` directory here)

### Additional notes about the pip packages:
- The following is a list of the packages you need to install:
```
colorama
mkdocs
mkdocs-include-dir-to-nav
mkdocs-localsearch
mkdocs-material
mkdocs-material-extensions
mkdocs-section-index
pymdown-extensions
```
(A `requirements.txt` is provided for this virtualenv)

## How do I run it?

On Linux, you can use the provided bash scripts to do it.
To generate a set of mkdocs pages from the BlurEngine environment, simply run:
```bash
# For those with a venv.
./enter-venv.sh
./document.sh
```

You should have a built mkdocs site at `finished-docs/` now!

For Windows users, you're going to have to do this manually, like so:
```
.\venv\Scripts\activate
BlurEngine.exe --headless
py document.py
cd web-docs
mkdocs build
```

## Credits
The blur script was made using json.lua: https://github.com/rxi/json.lua